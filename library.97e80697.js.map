{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,aAEO,MAAMC,EAAQC,SAASC,cAAc,cACtCC,EAAaF,SAASC,cAAc,YACpCE,EAAWH,SAASC,cAAc,UAExC,SAASG,IACP,MAAMC,EAAyBC,aAAaC,QAAQ,eAC9CC,EAA8BC,KAAKC,MAAML,GAI/C,GAHAH,EAAWS,UAAUC,IAAI,kCACzBT,EAASQ,UAAUE,OAAO,kCAC1Bd,EAAMe,UAAY,GACa,OAA3BT,GAA8D,OAA3BA,EAAiC,CACtE,MAAMU,EACJ,sEACFhB,EAAMe,UAAYC,C,MAElBC,EAAgBR,E,CAIpB,SAASS,IACP,MAAMC,EAAuBZ,aAAaC,QAAQ,aAC5CY,EAA4BV,KAAKC,MAAMQ,GAI7C,GAHAhB,EAAWS,UAAUE,OAAO,kCAC5BV,EAASQ,UAAUC,IAAI,kCACvBb,EAAMe,UAAY,GACW,OAAzBI,GAA0D,OAAzBA,EAA+B,CAClE,MAAMH,EAAO,2DACbhB,EAAMe,UAAYC,C,MAElBC,EAAgBG,E,CAIpB,SAASH,EAAgBI,GACvB,MAAMC,EAASD,EACZE,KAAIC,IACH,MAAMC,GACJA,EAAEC,MACFA,EAAKC,YACLA,EAAWC,OACXA,EAAMC,aACNA,EAAYC,aACZA,GACEN,EACJ,IACIO,GAAiB,EAAAC,EAAAC,gBADF,GAC+BH,GAC7B,KAAjBA,QAAwCI,IAAjBJ,IACzBC,EAAiB,YAEnB,IAAII,EAASrC,EAAAsC,aAAeT,EACR,OAAhBA,IACFQ,EAAS,0DAEX,MAAME,GAAc,EAAAL,EAAAM,YAAWZ,EAAO,IAChCa,EAqBZ,SAAiCC,GAC/B,IAAIC,EAAQ,GACZ,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAmBG,OAAQD,GAAK,EAClDD,EAAMG,KAAKJ,EAAmBE,GAAGjB,IAEnC,OAAOgB,C,CA1B0BI,CAAwBjB,GAErD,MAAO,6DAC6CH,sDACVU,wBAC7BT,8BAAkCD,4DACAA,MAAOY,oDAL9B,EAAAL,EAAAc,WAAUP,GAAsBQ,KAAK,MAMTC,MAC5C,EACA,SACKjB,kCAA+CF,EAAaoB,QACvE,iDAGK,IAERF,KAAK,IAER/C,EAAMkD,mBAAmB,YAAa5B,E,CAsCxC,SAAS6B,EAAcC,GACgC,GAAjD1C,KAAKC,MAAMJ,aAAaC,QAAQ,SAAS6C,KAK3CD,IAdJ,WACE,MAAME,EAAarD,SAASC,cAAc,kBACpCqD,EAAWtD,SAASC,cAAc,kBAExCoD,EAAWE,aAAa,WAAY,IACpCD,EAASC,aAAa,WAAW,G,CAK/BC,E,CAQJN,EAAc9C,GAGAJ,SAASC,cAAc,wBAC/BwD,iBAAiB,SAvCvB,WACE,GAAIvD,EAAWS,UAAU+C,MAAMC,SAAS,kCAAmC,CACzE,MAAMC,EAA8BtD,aAAaC,QAAQ,eACnDsD,EAAmCpD,KAAKC,MAAMkD,GACtB,IAA1B7D,EAAM+D,SAASpB,QAA0C,IAA1B3C,EAAM+D,SAASpB,QAAgBmB,EAAiCnB,SAAW3C,EAAM+D,SAASpB,QAC3HtC,G,MAEG,GAAID,EAASQ,UAAU+C,MAAMC,SAAS,kCAAmC,CAC9E,MAAMI,EAA4BzD,aAAaC,QAAQ,aACjDyD,EAAiCvD,KAAKC,MAAMqD,GACpB,IAA1BhE,EAAM+D,SAASpB,QAA0C,IAA1B3C,EAAM+D,SAASpB,QAAgBsB,EAA+BtB,SAAW3C,EAAM+D,SAASpB,QACzHzB,G,KA+BNf,EAAWuD,iBAAiB,SAAUQ,IACpCC,QAAQC,IAAI,KACZjB,EAAc9C,EAAsB,IAEtCD,EAASsD,iBAAiB,SAAUQ,IAClCC,QAAQC,IAAI,KACZjB,EAAcjC,EAAoB,G","sources":["src/js/library.js"],"sourcesContent":["import { renderPoster } from './api-keys';\nimport { getGenres,getRealeseYear,getMappedGenres, textSlicer } from './utils';\nexport const cards = document.querySelector('.card-list');\nconst btnWatched = document.querySelector('.watched');\nconst btnQueue = document.querySelector('.queue');\n\nfunction preStepsBeforeWatched() {\n  const watchedListFromStorage = localStorage.getItem('watchedList');\n  const arrayWatchedListFromStorage = JSON.parse(watchedListFromStorage);\n  btnWatched.classList.add('header-library__btn__is-active');\n  btnQueue.classList.remove('header-library__btn__is-active');\n  cards.innerHTML = '';\n  if (watchedListFromStorage === '[]' || watchedListFromStorage === null) {\n    const name =\n      '<div class=\"card-text-no-film\"><p>No watched movies added</p></div>';\n    cards.innerHTML = name;\n  } else {\n    createCardsList(arrayWatchedListFromStorage);\n  }\n}\n\nfunction preStepsBeforeQueue() {\n  const queueListFromStorage = localStorage.getItem('queueList');\n  const arrayQueueListFromStorage = JSON.parse(queueListFromStorage);\n  btnWatched.classList.remove('header-library__btn__is-active');\n  btnQueue.classList.add('header-library__btn__is-active');\n  cards.innerHTML = '';\n  if (queueListFromStorage === '[]' || queueListFromStorage === null) {\n    const name = '<p class=\"card-text-no-film\">No movie added to queue</p>';\n    cards.innerHTML = name;\n  } else {\n    createCardsList(arrayQueueListFromStorage);\n  }\n}\n\nfunction createCardsList(movie) {\n  const markup = movie\n    .map(movie => {\n      const {\n        id,\n        title,\n        poster_path,\n        genres,\n        vote_average,\n        release_date,\n      } = movie;\n      let realeaseYear = '';\n      let yearOfRealease = getRealeseYear(realeaseYear, release_date);\n      if (release_date === '' || release_date === undefined) {\n        yearOfRealease = 'Year:N/A';\n      }\n      let imgUrl = renderPoster + poster_path;\n      if (poster_path === null) {\n        imgUrl = 'https://i.postimg.cc/MTBLYYMP/poster-not-available.jpg';\n      }\n      const slicedTitle = textSlicer(title, 30);\n      const movieGenresListArray = getMovieGenresListArray(genres);\n      const movieGenresList = getGenres(movieGenresListArray).join(', ');\n      return `\n            <li class=\"card-item\" tabindex=\"0\" data-id=\"${id}\">\n            <img  class=\"card-item__img\" src=\"${imgUrl}\"\n            alt=\"${title}\" loading=\"lazy\" data-id=\"${id}\"/>\n            <h2 class=\"card-item__title\"  data-id=\"${id}\">${slicedTitle}</h2>\n            <p class=\"card-item__desc\"> ${movieGenresList.slice(\n              0,\n              27\n            )} | ${yearOfRealease} | <span class=\"vote-library\">${vote_average.toFixed(\n        1\n      )}</span> </p>\n            </li>\n            `;\n    })\n    .join('');\n\n  cards.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction getMovieGenresListArray(genresIdsListArray) {\n  let array = [];\n  for (let i = 0; i < genresIdsListArray.length; i += 1) {\n    array.push(genresIdsListArray[i].id);\n  }\n  return array;\n}\n\n// ------------------ Функція рендеру сторінки при зміні додаванні/видаленні фільмів у Модальному вікні фільму ---------------------\n\nfunction reloadAfterModalClose() {\n  if (btnWatched.classList.value.includes(`header-library__btn__is-active`)) {\n    const watchedListFromStorageModal = localStorage.getItem('watchedList');\n    const arrayWatchedListFromStorageModal = JSON.parse(watchedListFromStorageModal);\n    if (cards.children.length === 0 || cards.children.length === 1 || arrayWatchedListFromStorageModal.length !== cards.children.length) {\n      preStepsBeforeWatched();\n    };\n  } else if (btnQueue.classList.value.includes(`header-library__btn__is-active`)) {\n    const queueListFromStorageModal = localStorage.getItem('queueList');\n    const arrayQueueListFromStorageModal = JSON.parse(queueListFromStorageModal);\n    if (cards.children.length === 0 || cards.children.length === 1 || arrayQueueListFromStorageModal.length !== cards.children.length) {\n      preStepsBeforeQueue();\n    };\n  };\n};\n\n//---Added by Denis for authorized, don't delete please ;) --//\nfunction authorizedOnly() {\n  const watchedBtn = document.querySelector('[watch-button]')\n  const queueBtn = document.querySelector('[queue-button]')\n\n  watchedBtn.setAttribute('disabled', '') \n  queueBtn.setAttribute('disabled','')\n}\n\nfunction visualization(func) {\n  if (JSON.parse(localStorage.getItem('auth')).auth != true) {\n    authorizedOnly()\n    return\n  }\n  else {\n    func();\n  }\n}\n\nvisualization(preStepsBeforeWatched) \n\n//---Added by Denis for authorized, don't delete please ;) --//\nconst modal = document.querySelector('.modal-film-backdrop');\nmodal.addEventListener('click', reloadAfterModalClose);\n\n//---Changed by Denis for authorized, don't change please ;) --//\nbtnWatched.addEventListener('click', (event) => {\n  console.log('+')\n  visualization(preStepsBeforeWatched) \n});\nbtnQueue.addEventListener('click', (event) => {\n  console.log('+')\n  visualization(preStepsBeforeQueue)\n});"],"names":["$5LGuc","parcelRequire","$93effc6fc56091ad$export$f9417f756858637d","document","querySelector","$93effc6fc56091ad$var$btnWatched","$93effc6fc56091ad$var$btnQueue","$93effc6fc56091ad$var$preStepsBeforeWatched","watchedListFromStorage","localStorage","getItem","arrayWatchedListFromStorage","JSON","parse","classList","add","remove","innerHTML","name","$93effc6fc56091ad$var$createCardsList","$93effc6fc56091ad$var$preStepsBeforeQueue","queueListFromStorage","arrayQueueListFromStorage","movie1","markup","map","movie","id","title","poster_path","genres","vote_average","release_date","yearOfRealease","$1RLhk","getRealeseYear","undefined","imgUrl","renderPoster","slicedTitle","textSlicer","movieGenresListArray","genresIdsListArray","array","i","length","push","$93effc6fc56091ad$var$getMovieGenresListArray","getGenres","join","slice","toFixed","insertAdjacentHTML","$93effc6fc56091ad$var$visualization","func","auth","watchedBtn","queueBtn","setAttribute","$93effc6fc56091ad$var$authorizedOnly","addEventListener","value","includes","watchedListFromStorageModal","arrayWatchedListFromStorageModal","children","queueListFromStorageModal","arrayQueueListFromStorageModal","event","console","log"],"version":3,"file":"library.97e80697.js.map"}